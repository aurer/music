const endpoint = 'https://ws.audioscrobbler.com/2.0/';

function makeParams(object) {
  let params = [];

  for (const key in object) {
    if (object.hasOwnProperty(key)) {
      params.push(`${key}=${object[key]}`);
    }
  }

  return params.join('&');
}

class Scrobbler {
  constructor(user, api_key) {
    this.user = user;
    this.api_key = api_key;
    return this;
  }

  getRecentTracks(limit, page) {
    return this.fetch({
      method: 'user.getrecenttracks',
      limit: limit,
      page: page
    });
  }

  fetch(params) {
    let defaultParams = {
      user: this.user,
      api_key: this.api_key,
      format: 'json',
      limit: 10,
      page: 1
    };
    let queryString = makeParams(Object.assign(defaultParams, params));
    let url = `${endpoint}?${queryString}`;
    return fetch(url).then(res => res.json());
  }

}

export default Scrobbler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL3Njcm9iYmxlci5qcyJdLCJuYW1lcyI6WyJlbmRwb2ludCIsIm1ha2VQYXJhbXMiLCJvYmplY3QiLCJwYXJhbXMiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsInB1c2giLCJqb2luIiwiU2Nyb2JibGVyIiwiY29uc3RydWN0b3IiLCJ1c2VyIiwiYXBpX2tleSIsImdldFJlY2VudFRyYWNrcyIsImxpbWl0IiwicGFnZSIsImZldGNoIiwibWV0aG9kIiwiZGVmYXVsdFBhcmFtcyIsImZvcm1hdCIsInF1ZXJ5U3RyaW5nIiwiT2JqZWN0IiwiYXNzaWduIiwidXJsIiwidGhlbiIsInJlcyIsImpzb24iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBRyxvQ0FBakI7O0FBRUEsU0FBU0MsVUFBVCxDQUFvQkMsTUFBcEIsRUFBNEI7QUFDM0IsTUFBSUMsTUFBTSxHQUFHLEVBQWI7O0FBQ0EsT0FBSyxNQUFNQyxHQUFYLElBQWtCRixNQUFsQixFQUEwQjtBQUN6QixRQUFJQSxNQUFNLENBQUNHLGNBQVAsQ0FBc0JELEdBQXRCLENBQUosRUFBZ0M7QUFDL0JELE1BQUFBLE1BQU0sQ0FBQ0csSUFBUCxDQUFhLEdBQUVGLEdBQUksSUFBR0YsTUFBTSxDQUFDRSxHQUFELENBQU0sRUFBbEM7QUFDQTtBQUNEOztBQUNELFNBQU9ELE1BQU0sQ0FBQ0ksSUFBUCxDQUFZLEdBQVosQ0FBUDtBQUNBOztBQUVELE1BQU1DLFNBQU4sQ0FBZ0I7QUFDZkMsRUFBQUEsV0FBVyxDQUFDQyxJQUFELEVBQU9DLE9BQVAsRUFBZ0I7QUFDMUIsU0FBS0QsSUFBTCxHQUFZQSxJQUFaO0FBQ0EsU0FBS0MsT0FBTCxHQUFlQSxPQUFmO0FBQ0EsV0FBTyxJQUFQO0FBQ0E7O0FBRURDLEVBQUFBLGVBQWUsQ0FBQ0MsS0FBRCxFQUFRQyxJQUFSLEVBQWM7QUFDNUIsV0FBTyxLQUFLQyxLQUFMLENBQVc7QUFDakJDLE1BQUFBLE1BQU0sRUFBRSxzQkFEUztBQUVqQkgsTUFBQUEsS0FBSyxFQUFFQSxLQUZVO0FBR2pCQyxNQUFBQSxJQUFJLEVBQUVBO0FBSFcsS0FBWCxDQUFQO0FBS0E7O0FBRURDLEVBQUFBLEtBQUssQ0FBQ1osTUFBRCxFQUFTO0FBQ2IsUUFBSWMsYUFBYSxHQUFHO0FBQ25CUCxNQUFBQSxJQUFJLEVBQUUsS0FBS0EsSUFEUTtBQUVuQkMsTUFBQUEsT0FBTyxFQUFFLEtBQUtBLE9BRks7QUFHbkJPLE1BQUFBLE1BQU0sRUFBRSxNQUhXO0FBSW5CTCxNQUFBQSxLQUFLLEVBQUUsRUFKWTtBQUtuQkMsTUFBQUEsSUFBSSxFQUFFO0FBTGEsS0FBcEI7QUFPQSxRQUFJSyxXQUFXLEdBQUdsQixVQUFVLENBQUNtQixNQUFNLENBQUNDLE1BQVAsQ0FBY0osYUFBZCxFQUE2QmQsTUFBN0IsQ0FBRCxDQUE1QjtBQUNBLFFBQUltQixHQUFHLEdBQUksR0FBRXRCLFFBQVMsSUFBR21CLFdBQVksRUFBckM7QUFFQSxXQUFPSixLQUFLLENBQUNPLEdBQUQsQ0FBTCxDQUFXQyxJQUFYLENBQWdCQyxHQUFHLElBQUlBLEdBQUcsQ0FBQ0MsSUFBSixFQUF2QixDQUFQO0FBQ0E7O0FBM0JjOztBQThCaEIsZUFBZWpCLFNBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlbmRwb2ludCA9ICdodHRwczovL3dzLmF1ZGlvc2Nyb2JibGVyLmNvbS8yLjAvJztcclxuXHJcbmZ1bmN0aW9uIG1ha2VQYXJhbXMob2JqZWN0KSB7XHJcblx0bGV0IHBhcmFtcyA9IFtdO1xyXG5cdGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xyXG5cdFx0aWYgKG9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcblx0XHRcdHBhcmFtcy5wdXNoKGAke2tleX09JHtvYmplY3Rba2V5XX1gKTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIHBhcmFtcy5qb2luKCcmJyk7XHJcbn1cclxuXHJcbmNsYXNzIFNjcm9iYmxlciB7XHJcblx0Y29uc3RydWN0b3IodXNlciwgYXBpX2tleSkge1xyXG5cdFx0dGhpcy51c2VyID0gdXNlcjtcclxuXHRcdHRoaXMuYXBpX2tleSA9IGFwaV9rZXk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdGdldFJlY2VudFRyYWNrcyhsaW1pdCwgcGFnZSkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goe1xyXG5cdFx0XHRtZXRob2Q6ICd1c2VyLmdldHJlY2VudHRyYWNrcycsXHJcblx0XHRcdGxpbWl0OiBsaW1pdCxcclxuXHRcdFx0cGFnZTogcGFnZVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmZXRjaChwYXJhbXMpIHtcclxuXHRcdGxldCBkZWZhdWx0UGFyYW1zID0ge1xyXG5cdFx0XHR1c2VyOiB0aGlzLnVzZXIsXHJcblx0XHRcdGFwaV9rZXk6IHRoaXMuYXBpX2tleSxcclxuXHRcdFx0Zm9ybWF0OiAnanNvbicsXHJcblx0XHRcdGxpbWl0OiAxMCxcclxuXHRcdFx0cGFnZTogMVxyXG5cdFx0fTtcclxuXHRcdGxldCBxdWVyeVN0cmluZyA9IG1ha2VQYXJhbXMoT2JqZWN0LmFzc2lnbihkZWZhdWx0UGFyYW1zLCBwYXJhbXMpKTtcclxuXHRcdGxldCB1cmwgPSBgJHtlbmRwb2ludH0/JHtxdWVyeVN0cmluZ31gO1xyXG5cclxuXHRcdHJldHVybiBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2Nyb2JibGVyO1xyXG4iXSwiZmlsZSI6InNlcnZpY2VzL3Njcm9iYmxlci5qcyJ9